<?xml version="1.0" ?>
<ItemRenderer>
    <Data>
        <Sprite name="Sprite10" fileName="game/player_cosmetics4.rttex" textureSize="32,32" frame="14,0" />
        <Sprite name="Sprite39" fileName="game/particles_large16.rttex" textureSize="64,64" frame="0,7" />
        <Sprite name="Sprite152" fileName="game/particles12.rttex" textureSize="32,32" frame="29,5" />
        <Animations>
            <SpriteAnimation name="a_Idle" sprite="Sprite39" isLoop="true" animTime="300" playOnState="Punch.No">
                <Frame>0,7</Frame>
                <Frame>1,7</Frame>
                <Frame>2,7</Frame>
            </SpriteAnimation>
			<SpriteAnimation name="a_Punch" sprite="Sprite39" isLoop="true" animTime="400" playOnState="Punch.Yes">
                <Frame>4,7</Frame>
                <Frame>5,7</Frame>
                <Frame>6,7</Frame>
				<Frame>7,7</Frame>
            </SpriteAnimation>
			<SpriteSinPulseAnimation name="a_Sprite39" sprite="Sprite39" autoPlay="true">
				<Parameter name="alpha">
					<Set name="period">5000</Set>
					<Set name="scale">0.2</Set>
					<Set name="offset">0.7</Set>
				</Parameter>
			</SpriteSinPulseAnimation>
			<SpriteSinPulseAnimation name="a_bob" sprite="Sprite39" autoPlay="true">
				<Parameter name="pos.y">
					<Set name="period">3000</Set>
					<Set name="scale">4</Set>
					<Set name="offset">0</Set>
				</Parameter>
			</SpriteSinPulseAnimation>
        </Animations>
        <ParticleSystems>
            <ParticleSystem name="PS124">
                <Emitter attachment="targetPos2">
                    <Set name="delayTimer">0</Set>
                    <Set name="infLifeTime">false</Set>
                    <Set name="infParticles">false</Set>
                    <Set name="lifeTime">0</Set>
                    <Random name="offset" min="-14,-112" max="14,-112" />
					<SetVar name="arrow.target.offset" source="offset"/>
                    <Set name="emissionInterval">0</Set>
                    <Set name="particlesToEmit">0</Set>
                    <Set name="checkParticleNumToEmit">false</Set>
                    <Set name="particlesPerEmission">1</Set>
                </Emitter>
                <Particle>
                    <Curve name="initialAlpha">
                        <KeyFrame>0,0.5</KeyFrame>
                        <KeyFrame>1,1</KeyFrame>
                    </Curve>
                    <Set name="initialAngle">0</Set>
                    <Set name="inSpecificOrder">false</Set>
                    <Set name="flipX">false</Set>
                    <Set name="flipY">false</Set>
                    <Set name="lifeTime">0.3</Set>
                    <Set name="relativeToEmitter">false</Set>
                    <Set name="offset">0,0</Set>
                    <Set name="rotateWithVelocity">false</Set>
                    <Set name="initialRotationRate">0</Set>
                    <Set name="initialScale">1,1</Set>
                    <Set name="sprite">Sprite152</Set>
                    <Set name="initialVelocity">0,280</Set>
					<Set name="blendingMode">ADDITIVE</Set>
                </Particle>
            </ParticleSystem>
			<ParticleSystem name="ps_hit">
                <Emitter attachment="targetPos2">
                    <Set name="delayTimer">0.3</Set>
                    <Set name="infLifeTime">false</Set>
                    <Set name="infParticles">false</Set>
                    <Set name="lifeTime">0</Set>
                    <Set name="emissionInterval">0</Set>
                    <Set name="particlesToEmit">0</Set>
                    <Set name="checkParticleNumToEmit">false</Set>
                    <Set name="particlesPerEmission">1</Set>
					<Set name="offset" source="arrow.target.offset"/>
                </Emitter>
                <Particle>
                    <Set name="initialAngle">0</Set>
                    <Set name="inSpecificOrder">false</Set>
                    <Set name="flipX">false</Set>
                    <Set name="flipY">false</Set>
                    <Set name="lifeTime">1.3</Set>
                    <Set name="relativeToEmitter">false</Set>
                    <Set name="offset">0,-16</Set>
                    <Set name="rotateWithVelocity">false</Set>
                    <Set name="initialRotationRate">0</Set>
                    <Set name="initialScale">1,1</Set>
                    <Set name="sprite">Sprite152</Set>
					<Set name="blendingMode">ADDITIVE</Set>
                </Particle>
            </ParticleSystem>
        </ParticleSystems>
		<VariableMap>
			<Set name="arrow.target.offset">0, 0</Set>
		</VariableMap>
		<TileStampData>
			<Set name="FileName">game/particles12.rttex</Set>
			<Set name="EndFrame">28,5</Set>
			<Set name="FrameCount">4</Set>
		</TileStampData>
		<StateMachines>
			<StateMachine name="Punch">
				<States>
					<State name="No" />
					<State name="Yes" />
				</States>
				<Transitions>
					<Transition to="No" from="Yes">
						<Condition>
							<IsAction operatorType="NotEqual">PUNCH</IsAction>
						</Condition>
					</Transition>
					<Transition to="Yes" from="No">
						<Condition>
							<IsAction>PUNCH</IsAction>
						</Condition>
					</Transition>
				</Transitions>
			</StateMachine>
			<StateMachine name="PunchParticle">
				<States>
					<State name="No" ExitTime="0.4"/>
					<State name="Yes" />
				</States>
				<Transitions>
					<Transition to="No" from="Yes"/>
					<Transition to="Yes" from="No">
						<Condition>
							<IsAction>PUNCH</IsAction>
						</Condition>
					</Transition>
				</Transitions>
			</StateMachine>
		</StateMachines>
		<RenderOptions>
			<Default>
				<Set name="IgnoreDefaultDamagedTileEffect">true</Set>
			</Default>
		</RenderOptions>
    </Data>
    <RenderRules>
		<Update>
			<StopIf>
				<IsRenderMod>RENDER_MOD_MINI_YOU</IsRenderMod>
			</StopIf>
			<Group onState="PunchParticle.Yes">
				<ParticleSystemUpdate name="PS124" />
			</Group>
		</Update>
        <RenderChestItem>
            <SpriteRender name="Sprite10" blend="PREMULTIPLIED_ALPHA" alignment="DOWN_CENTER" drawShadow="true" />
        </RenderChestItem>
        <RenderBehind>
			<StopIf>
				<IsZombified>true</IsZombified>
			</StopIf>
            <Translate>-13,-8,0</Translate>
            <SpriteRender name="Sprite39" blend="PREMULTIPLIED_ALPHA" drawShadow="false" />
        </RenderBehind>
		<OnDamagedTile>
			<ArithmethicOperation LeftHandVariableName="arrow.target.offset.y" RightHandVariableName="0" OperationType="Set"/>
			<ParticleSystemUpdate name="ps_hit" />
		</OnDamagedTile>
		<OnPunchUpdate>
			<AvatarTransform class="Face">
				<Set name="face">MAD</Set>
			</AvatarTransform>
			<AvatarTransform class="ArmAngle">
				<Set name="armName">arm1Angle</Set>
				<Set name="pointTowardsPunchTarget">true</Set>
			</AvatarTransform>
		</OnPunchUpdate>
    </RenderRules>
</ItemRenderer>
