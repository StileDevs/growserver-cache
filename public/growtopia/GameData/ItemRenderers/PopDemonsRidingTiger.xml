<?xml version="1.0" encoding="utf-8"?>
<ItemRenderer>
  <Data>
    <Sprite name="s_equipBack" fileName="game/player_feet16.rttex" textureSize="32" frame="5,24"/>
    <Sprite name="s_equipFront" fileName="game/player_feet16.rttex" textureSize="32" frame="5,25"/>
    <Sprite name="s_jump" fileName="game/particles12.rttex" textureSize="32" frame="23,8"/>

    <Animations>
      <SpriteAnimation name="a_idleBack" playOnState="Motion.Idle" sprite="s_equipBack" isLoop="true" animTime="400">
        <Frame>5,24</Frame>
        <Frame>6,24</Frame>
        <Frame>7,24</Frame>
        <Frame>8,24</Frame>
      </SpriteAnimation>
      <SpriteAnimation name="a_moveBack" playOnState="Motion.Move" sprite="s_equipBack" isLoop="true" animTime="400">
        <Frame>9,24</Frame>
        <Frame>10,24</Frame>
        <Frame>11,24</Frame>
        <Frame>12,24</Frame>
      </SpriteAnimation>
      <SpriteAnimation name="a_jumpBack" playOnState="Motion.Jump" sprite="s_equipBack" isLoop="true" animTime="100">
        <Frame>13,24</Frame>
      </SpriteAnimation>
      <SpriteAnimation name="a_fallBack" playOnState="Motion.Fall" sprite="s_equipBack" isLoop="true" animTime="100">
        <Frame>14,24</Frame>
      </SpriteAnimation>
      <SpriteAnimation name="a_idleFront" playOnState="Motion.Idle" sprite="s_equipFront" isLoop="true" animTime="400">
        <Frame>5,25</Frame>
        <Frame>6,25</Frame>
        <Frame>7,25</Frame>
        <Frame>8,25</Frame>
      </SpriteAnimation>
      <SpriteAnimation name="a_moveFront" playOnState="Motion.Move" sprite="s_equipFront" isLoop="true" animTime="400">
        <Frame>9,25</Frame>
        <Frame>10,25</Frame>
        <Frame>11,25</Frame>
        <Frame>12,25</Frame>
      </SpriteAnimation>
      <SpriteAnimation name="a_jumpFront" playOnState="Motion.Jump" sprite="s_equipFront" isLoop="true" animTime="100">
        <Frame>13,25</Frame>
      </SpriteAnimation>
      <SpriteAnimation name="a_fallFront" playOnState="Motion.Fall" sprite="s_equipFront" isLoop="true" animTime="100">
        <Frame>14,25</Frame>
      </SpriteAnimation>
    </Animations>

    <StateMachines>
      <StateMachine name="Motion">
        <States>
          <State name="Idle" />
          <State name="Move" />
          <State name="Jump" />
          <State name="Fall" />
        </States>
        <Transitions>
          <Transition to="Idle" from="Fall|Move|Jump">
            <Condition type="and">
              <IsVariableBool name="onGround">true</IsVariableBool>
              <IsVariableFloat name="speed.length" operator="Less" abs="true">0.1</IsVariableFloat>
            </Condition>
          </Transition>
          <Transition to="Move" from="Jump|Fall|Idle">
            <Condition type="and">
              <IsVariableBool name="onGround">true</IsVariableBool>
              <IsVariableFloat name="speed.length" operator="Greater" abs="true">0.1</IsVariableFloat>
            </Condition>
          </Transition>
          <Transition to="Jump" from="Idle|Move|Fall">
            <Condition type="and">
              <IsVariableBool name="onGround">false</IsVariableBool>
              <IsVariableFloat name="speed.y" operator="Less">-0.1</IsVariableFloat>
            </Condition>
          </Transition>
          <Transition to="Fall" from="Jump|Idle|Move">
            <Condition type="and">
              <IsVariableBool name="onGround">false</IsVariableBool>
              <IsVariableFloat name="speed.y" operator="Greater">0.1</IsVariableFloat>
            </Condition>
          </Transition>
        </Transitions>
      </StateMachine>
    </StateMachines>

    <ParticleSystems>
      <ParticleSystem name="ps_jumpParticlesRight">
        <Emitter>
          <Set name="particlesPerEmission">1</Set>
          <Set name="particlesToEmit">1</Set>
          <Set name="offset">16,16</Set>
        </Emitter>
        <Particle>
          <Set name="sprite">s_jump</Set>
          <Set name="blendingMode">ADDITIVE</Set>
          <Set name="lifeTime">0.75</Set>
          <Curve name="initialAlpha">
            <KeyFrame>0, 1</KeyFrame>
            <KeyFrame>0.5, 1</KeyFrame>
            <KeyFrame>1, 0</KeyFrame>
          </Curve>
          <Curve name="initialScale">
            <KeyFrame>0, 0.5,0.5</KeyFrame>
            <KeyFrame>1, 1,1</KeyFrame>
          </Curve>
        </Particle>
      </ParticleSystem>
      <ParticleSystem name="ps_jumpParticlesLeft">
        <Emitter>
          <Set name="particlesPerEmission">1</Set>
          <Set name="particlesToEmit">1</Set>
          <Set name="offset">-6,16</Set>
        </Emitter>
        <Particle>
          <Set name="sprite">s_jump</Set>
          <Set name="blendingMode">ADDITIVE</Set>
          <Set name="lifeTime">0.75</Set>
          <Curve name="initialAlpha">
            <KeyFrame>0, 1</KeyFrame>
            <KeyFrame>0.5, 1</KeyFrame>
            <KeyFrame>1, 0</KeyFrame>
          </Curve>
          <Curve name="initialScale">
            <KeyFrame>0, 0.5,0.5</KeyFrame>
            <KeyFrame>1, 1,1</KeyFrame>
          </Curve>
        </Particle>
      </ParticleSystem>
    </ParticleSystems>

    <RenderOptions>
      <Default>
        <Set name="IsToRenderPants">true</Set>
        <Set name="IgnorePunchTypeCheck">true</Set>
        <Set name="ShoesShouldIgnoreRaptorLegsOffset">true</Set>
        <Set name="ClothingOffsetFromShoes">-7</Set>
        <Set name="UserNameOffset">11</Set>
        <Set name="IsHorse">true</Set>
      </Default>
    </RenderOptions>

  </Data>

  <RenderRules>
    <RenderShoes>
      <SpriteRender name="s_equipBack" offset="2,8" alignmentLeft="DOWN_LEFT" alignmentRight="DOWN_RIGHT"/>
      <SpriteRender name="s_equipFront" offset="2,8" alignmentLeft="DOWN_RIGHT" alignmentRight="DOWN_LEFT"/>
      <StopIf>
        <IsRenderMod>RENDER_MOD_MINI_YOU</IsRenderMod>
      </StopIf>
      <ParticleSystemUpdate name="ps_jumpParticlesLeft" onAction="JUMPSTART|JUMPDOUBLE"/>
      <ParticleSystemUpdate name="ps_jumpParticlesRight" onAction="JUMPSTART|JUMPDOUBLE"/>
    </RenderShoes>
  </RenderRules>
</ItemRenderer>